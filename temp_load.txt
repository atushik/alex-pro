function loadAvailableOrders() {
    const ordersList = document.getElementById('orders-container'); 
    if(!ordersList) return; 

    db.collection('orders')
      .where('status', 'in', ['pending', 'pending_payment', 'paid']) 
      .where('deliveryType', '==', 'Livraison')
      .orderBy('createdAt', 'desc')
      .onSnapshot(snapshot => {
          ordersList.innerHTML = ''; 
          if (snapshot.empty) {
              ordersList.innerHTML = '<div class="empty-state"><span class="emoji-anim" style="font-size:2em">📡</span><br>Aucune commande disponible.</div>';
              return;
          }
          snapshot.forEach(doc => {
              const order = doc.data();
              order.id = doc.id;
              const orderSize = order.parcelSize || 'Petit (S)';
              const allowedSizes = VEHICLE_CAPACITY[currentVehicle] || VEHICLE_CAPACITY['velo'];
              
              // Filter logic
              if (!allowedSizes.includes(orderSize)) return; 
              
              renderOrderCard(order, ordersList);
          });
      });
}

function renderOrderCard(order, container) {
    const html = `
        <div class="order-card">
            <div class="order-head">
                <span class="shop-name"><span class="emoji-anim">🏪</span> ${order.shopName}</span>
                <span class="order-price">${order.totalPrice}€</span>
            </div>
            <div class="big-info">
                <div class="info-tag"><span class="emoji-anim">📦</span> Volume: <strong style="color:#fff;">${order.parcelSize || 'Petit (S)'}</strong></div>
                <div class="info-tag"><span class="emoji-anim">📍</span> De: ${order.from}</div>
                <div class="info-tag"><span class="emoji-anim">🏁</span> Vers: ${order.to}</div>
                <div class="info-tag"><span class="emoji-anim">🕒</span> Pour: ${order.deliveryTime}</div>
            </div>
